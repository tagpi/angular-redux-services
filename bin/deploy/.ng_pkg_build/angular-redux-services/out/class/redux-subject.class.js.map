{"version":3,"file":"redux-subject.class.js","sourceRoot":"","sources":["redux-subject.class.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,eAAe,EAAmB,MAAM,MAAM,CAAC;;;;AAGxD,MAAM,mBAAuB,SAAQ,eAAkB;;;;;;IAIrD,YACE,YAAiB,EACT,YACA;QAER,KAAK,CAAC,YAAY,CAAC,CAAC;QAHZ,eAAU,GAAV,UAAU;QACV,iBAAY,GAAZ,YAAY;sBALL,CAAC;KASjB;;;;IAED,SAAS;;QAGP,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,UAAU,EAAE,CAAC;SACnB;;QAGD,IAAI,CAAC,MAAM,EAAE,CAAC;;QAGd,uBAAM,YAAY,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QAC/E,uBAAM,aAAa,GAAG,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAClE,YAAY,CAAC,WAAW,GAAG,GAAG,EAAE;YAC9B,IAAI,CAAC,MAAM,EAAE,CAAC;;YAGd,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjB,IAAI,CAAC,YAAY,EAAE,CAAC;aACrB;YAED,aAAa,EAAE,CAAC;SACjB,CAAC;QAEF,MAAM,CAAC,YAAY,CAAC;KAErB;CAEF","sourcesContent":["import { BehaviorSubject, PartialObserver } from 'rxjs';\nimport { baseDirectiveCreate } from '@angular/core/src/render3/instructions';\n\nexport class ReduxSubject<T> extends BehaviorSubject<T> {\n\n  private active = 0;\n\n  constructor(\n    defaultValue: any,\n    private onActivate: () => void,\n    private onDeactivate: () => void) {\n\n    super(defaultValue);\n\n  }\n\n  subscribe() {\n\n    // link to\n    if (this.active === 0) {\n      this.onActivate();\n    }\n\n    // track the number of subscriptions\n    this.active++;\n\n    // override unsubscribe\n    const subscription = super.subscribe(...Array.prototype.slice.call(arguments));\n    const originalUnsub = subscription.unsubscribe.bind(subscription);\n    subscription.unsubscribe = () => {\n      this.active--;\n\n      // start deactivation when there are no subscriptions\n      if (!this.active) {\n        this.onDeactivate();\n      }\n\n      originalUnsub();\n    };\n\n    return subscription;\n\n  }\n\n}\n"]}